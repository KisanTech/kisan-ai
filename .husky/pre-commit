#!/bin/sh

# Backend formatting and linting
cd backend

echo "ğŸ¦€ Running Ruff linter and formatter on backend..."
uv run ruff check --fix . || { echo "âŒ Ruff linting failed. Please fix issues and stage the changes. Aborting commit."; exit 1; }

echo "ğŸ¦€ Running Ruff formatter on backend..."
uv run ruff format . || { echo "âŒ Ruff formatting failed. Please stage the changes. Aborting commit."; exit 1; }

echo "âœ… Python formatting and linting complete for backend!"

# Return to root directory
cd ..

# Frontend formatting
echo "ğŸ¨ Running Prettier on frontend files..."
npx prettier --write "frontend/**/*.{js,jsx,ts,tsx,json,css}" || { echo "âŒ Prettier formatting failed. Please fix issues and stage the changes. Aborting commit."; exit 1; }


echo "âœ… Frontend formatting complete!"

#Agents formatting and linting
cd agents


echo "ğŸ¦€ Running Ruff formatter on agents..."
uv run ruff format . || { echo "âŒ Ruff formatting failed. Please stage the changes. Aborting commit."; exit 1; }

echo "âœ… Python formatting and linting complete for agents!"

# Stage the formatted files
git add .